(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-7dce8275"],{"0187":function(e,t,r){"use strict";r.d(t,"e",function(){return n}),r.d(t,"c",function(){return s}),r.d(t,"f",function(){return i}),r.d(t,"d",function(){return l}),r.d(t,"a",function(){return a}),r.d(t,"b",function(){return u}),r.d(t,"h",function(){return c}),r.d(t,"i",function(){return d}),r.d(t,"g",function(){return f});var o=r("9bd2");function n(e){return Object(o.a)({url:"/auth/sys-role/pageList",method:"post",data:e})}function s(e){return Object(o.a)({url:"/auth/sys-role/detail?roleId="+e,method:"get"})}function i(){return Object(o.a)({url:"/auth/sys-menu/list",method:"get"})}function l(e){return Object(o.a)({url:"/role/pagedlist",method:"get",params:e,loading:{type:"nprogress",interval:500}})}function a(e){return Object(o.a)({url:"/auth/sys-role/delete?roleIds="+e,method:"post",success:{type:"message",options:{message:"删除成功",type:"success"}}})}function u(e){return Object(o.a)({url:"/role/batchdel",method:"delete",params:e,success:{type:"message",options:{message:"删除成功",type:"success"}}})}function c(e){return Object(o.a)({url:"/auth/sys-role/update",method:"post",data:e,success:{type:"message",options:{message:"保存成功",type:"success"}}})}function d(e){return Object(o.a)({url:"/auth/sys-role/save",method:"post",data:e,success:{type:"message",options:{message:"保存成功",type:"success"}}})}function f(e){return Object(o.a)({url:"/role/savepermission",method:"post",data:e,success:{type:"message",options:{message:"保存成功",type:"success"}}})}},"474e":function(e,t,r){"use strict";r.r(t);r("ac4d"),r("8a81"),r("ac6a");var g=r("cebc"),y=r("0187"),o={name:"roleEditForm",props:{role:Object,value:Boolean},data:function(){return{loading:!1,dialogVisible:!1,form:{roleName:"",remark:""},filterText:"",permissionList:[],menuIdLists:[]}},watch:{value:function(e){this.dialogVisible=e},dialogVisible:function(e){this.$emit("input",e)},filterText:function(e){this.$refs.tree.filter(e)}},methods:{dialogOpen:function(){var r=this;this.role.roleId?y.c(this.role.roleId).then(function(e){var t={};t.roleName=e.roleName,t.remark=e.remark,r.form=t,r.permissionList=e.menuList,r.menuIdLists=e.menuIdList,r.$refs.tree.setChecked(e.menuList,e.menuList.owner,!1)}):(this.form={},y.f().then(function(e){r.permissionList=e}))},saveRole:function(){var t=this,e=this.$refs.tree.getCheckedNodes(!1),r=this.$refs.tree.getHalfCheckedNodes(!1),o=[],n=!0,s=!1,i=void 0;try{for(var l,a=r[Symbol.iterator]();!(n=(l=a.next()).done);n=!0){var u=l.value;o.push(u.menuId)}}catch(e){s=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(s)throw i}}var c=!0,d=!1,f=void 0;try{for(var m,h=e[Symbol.iterator]();!(c=(m=h.next()).done);c=!0){var p=m.value;o.push(p.menuId)}}catch(e){d=!0,f=e}finally{try{c||null==h.return||h.return()}finally{if(d)throw f}}this.$refs.form.validate(function(e){if(!e)return!1;t.loading=!0,y.h(Object(g.a)({},t.form,{roleId:t.role.roleId,menuIds:o})).then(function(e){t.loading=!1,t.dialogVisible=!1,t.$emit("submit")})})},saveRoles:function(){var t=this,e=this.$refs.tree.getCheckedNodes(!1),r=this.$refs.tree.getHalfCheckedNodes(!1),o=[],n=!0,s=!1,i=void 0;try{for(var l,a=r[Symbol.iterator]();!(n=(l=a.next()).done);n=!0){var u=l.value;o.push(u.menuId)}}catch(e){s=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(s)throw i}}var c=!0,d=!1,f=void 0;try{for(var m,h=e[Symbol.iterator]();!(c=(m=h.next()).done);c=!0){var p=m.value;o.push(p.menuId)}}catch(e){d=!0,f=e}finally{try{c||null==h.return||h.return()}finally{if(d)throw f}}this.$refs.form.validate(function(e){if(!e)return!1;t.loading=!0,y.i(Object(g.a)({},t.form,{menuIds:o})).then(function(e){t.loading=!1,t.dialogVisible=!1,t.$emit("submit")})})},filterNode:function(e,t){return!e||-1!==t.title.indexOf(e)},close:function(){this.dialogClose()},dialogClose:function(){this.$refs.form.resetFields(),this.dialogVisible=!1}}},n=r("2877"),s=function(e){e.options.__source="src/views/sys/role/editForm.vue"},i=Object(n.a)(o,function(){var o=this,e=o.$createElement,n=o._self._c||e;return n("el-dialog",{attrs:{title:"角色信息",visible:o.dialogVisible},on:{"update:visible":function(e){o.dialogVisible=e},opened:o.dialogOpen,closed:o.dialogClose}},[n("el-form",{ref:"form",attrs:{model:o.form,"label-width":"80px",size:"small"}},[n("el-form-item",{attrs:{prop:"roleName",label:"角色名称",rules:[{required:!0,message:"不能为空"}]}},[n("el-input",{model:{value:o.form.roleName,callback:function(e){o.$set(o.form,"roleName",e)},expression:"form.roleName"}})],1),n("el-form-item",{attrs:{label:"备注"}},[n("el-input",{attrs:{type:"textarea"},model:{value:o.form.remark,callback:function(e){o.$set(o.form,"remark",e)},expression:"form.remark"}})],1),n("el-form-item",{attrs:{label:"设置权限"}},[n("el-tree",{ref:"tree",attrs:{"show-checkbox":"","check-on-click-node":"","default-expand-all":"",props:{label:"name",children:"children"},"highlight-current":"","node-key":"menuId",data:o.permissionList,"filter-node-method":o.filterNode,"expand-on-click-node":!1,"default-checked-keys":o.menuIdLists},scopedSlots:o._u([{key:"default",fn:function(e){var t=e.node,r=e.data;return n("span",{},[2==r.type?n("i",{staticClass:"fa fa-cog"}):o._e(),o._v(" "+o._s(t.label)+"\n      ")])}}])})],1),n("el-form-item",[o.role.roleId?n("el-button",{attrs:{type:"primary",loading:o.loading},on:{click:o.saveRole}},[o._v("保存")]):n("el-button",{attrs:{type:"primary",loading:o.loading},on:{click:o.saveRoles}},[o._v("保存")]),n("el-button",{on:{click:o.close}},[o._v("取消")])],1)],1)],1)},[],!1,null,null,null);"function"==typeof s&&s(i);t.default=i.exports}}]);