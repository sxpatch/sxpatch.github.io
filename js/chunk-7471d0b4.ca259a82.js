(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-7471d0b4"],{"0187":function(e,t,s){"use strict";s.d(t,"e",function(){return o}),s.d(t,"c",function(){return r}),s.d(t,"f",function(){return i}),s.d(t,"d",function(){return u}),s.d(t,"a",function(){return a}),s.d(t,"b",function(){return c}),s.d(t,"h",function(){return l}),s.d(t,"i",function(){return d}),s.d(t,"g",function(){return f});var n=s("9bd2");function o(e){return Object(n.a)({url:"/auth/sys-role/pageList",method:"post",data:e})}function r(e){return Object(n.a)({url:"/auth/sys-role/detail?roleId="+e,method:"get"})}function i(){return Object(n.a)({url:"/auth/sys-menu/list",method:"get"})}function u(e){return Object(n.a)({url:"/role/pagedlist",method:"get",params:e,loading:{type:"nprogress",interval:500}})}function a(e){return Object(n.a)({url:"/auth/sys-role/delete?roleIds="+e,method:"post",success:{type:"message",options:{message:"删除成功",type:"success"}}})}function c(e){return Object(n.a)({url:"/role/batchdel",method:"delete",params:e,success:{type:"message",options:{message:"删除成功",type:"success"}}})}function l(e){return Object(n.a)({url:"/auth/sys-role/update",method:"post",data:e,success:{type:"message",options:{message:"保存成功",type:"success"}}})}function d(e){return Object(n.a)({url:"/auth/sys-role/save",method:"post",data:e,success:{type:"message",options:{message:"保存成功",type:"success"}}})}function f(e){return Object(n.a)({url:"/role/savepermission",method:"post",data:e,success:{type:"message",options:{message:"保存成功",type:"success"}}})}},"5b64":function(e,t,s){"use strict";s.d(t,"d",function(){return o}),s.d(t,"c",function(){return r}),s.d(t,"e",function(){return i}),s.d(t,"a",function(){return u}),s.d(t,"b",function(){return a});var n=s("9bd2");function o(){return Object(n.a)({url:"/auth/sys-menu/list",method:"get"})}function r(e){return Object(n.a)({url:"/auth/sys-menu/detail?menuId="+e,method:"get"})}function i(e){return Object(n.a)({url:"/auth/sys-menu/update",method:"post",data:e,success:{type:"message",options:{message:"保存成功",type:"success"}}})}function u(e){return Object(n.a)({url:"/auth/sys-menu/save",method:"post",data:e,success:{type:"message",options:{message:"保存成功",type:"success"}}})}function a(e){return Object(n.a)({url:"/auth/sys-menu/delete?menuIds="+e,method:"post",success:{type:"message",options:{message:"删除成功",type:"success"}}})}},ebe1:function(e,t,s){"use strict";s.r(t);s("ac4d"),s("8a81"),s("ac6a"),s("96cf");var n,o=s("3b8d"),l=s("0187"),r=s("5b64"),i={name:"rolePermission",props:{role:Object,value:Boolean},data:function(){return{loading:!1,dialogVisible:!1,filterText:"",permissionList:[]}},watch:{value:function(e){this.dialogVisible=e},dialogVisible:function(e){this.$emit("input",e)},filterText:function(e){this.$refs.tree.filter(e)}},methods:{dialogOpen:(n=Object(o.a)(regeneratorRuntime.mark(function e(){var t,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.d();case 2:return this.permissionList=e.sent,e.next=5,l.e(this.role.id);case 5:t=e.sent,s=t.map(function(e){return e.functionId}),this.$refs.tree.setCheckedKeys(s);case 8:case"end":return e.stop()}},e,this)})),function(){return n.apply(this,arguments)}),filterNode:function(e,t){return!e||-1!==t.title.indexOf(e)},saveRolePermission:function(){var t=this,e=this.$refs.tree.getCheckedNodes(!0,!1),s=[],n=!0,o=!1,r=void 0;try{for(var i,u=e[Symbol.iterator]();!(n=(i=u.next()).done);n=!0){var a=i.value;2==a.type&&s.push(a.id)}}catch(e){o=!0,r=e}finally{try{n||null==u.return||u.return()}finally{if(o)throw r}}var c={roleId:this.role.id,permissions:s};this.loading=!0,l.g(c).then(function(e){t.loading=!1,t.dialogVisible=!1})},close:function(){this.dialogVisible=!1}}},u=s("2877"),a=function(e){e.options.__source="src/views/sys/role/rolePermission.vue"},c=Object(u.a)(i,function(){var n=this,e=n.$createElement,o=n._self._c||e;return o("el-dialog",{attrs:{visible:n.dialogVisible},on:{"update:visible":function(e){n.dialogVisible=e},open:n.dialogOpen}},[o("div",{attrs:{slot:"title"},slot:"title"},[n._v("维护\n    "),o("el-tag",[n._v(n._s(n.role.name))]),n._v("权限")],1),o("el-input",{staticStyle:{"padding-bottom":"5px"},attrs:{size:"mini",placeholder:"输入关键字进行过滤"},model:{value:n.filterText,callback:function(e){n.filterText=e},expression:"filterText"}}),o("el-tree",{ref:"tree",attrs:{"show-checkbox":"","check-on-click-node":"","default-expand-all":"",props:{label:"name"},"highlight-current":"","node-key":"id",data:n.permissionList,"filter-node-method":n.filterNode,"expand-on-click-node":!1},scopedSlots:n._u([{key:"default",fn:function(e){var t=e.node,s=e.data;return o("span",{},[2==s.type?o("i",{staticClass:"fa fa-cog"}):n._e(),n._v(" "+n._s(t.label)+"\n    ")])}}])}),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{type:"primary",loading:n.loading},on:{click:n.saveRolePermission}},[n._v("保存")]),o("el-button",{on:{click:n.close}},[n._v("取消")])],1)],1)},[],!1,null,null,null);"function"==typeof a&&a(c);t.default=c.exports}}]);